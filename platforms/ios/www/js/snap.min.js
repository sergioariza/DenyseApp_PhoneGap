(function(c,b){var a=a||function(k){var f={element:null,dragger:null,disable:"none",addBodyClasses:!0,hyperextensible:!0,resistance:.5,flickThreshold:50,transitionSpeed:.3,easing:"ease",maxPosition:225,minPosition:-225,tapToClose:!0,touchToDrag:!0,slideIntent:40,minDragDistance:5},e={simpleStates:{opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},h={},d={hasTouch:null===b.ontouchstart,eventType:function(m){var l={down:d.hasTouch?"touchstart":"mousedown",move:d.hasTouch?"touchmove":"mousemove",up:d.hasTouch?"touchend":"mouseup",out:d.hasTouch?"touchcancel":"mouseout"};return l[m]},page:function(l,m){return d.hasTouch&&m.touches.length&&m.touches[0]?m.touches[0]["page"+l]:m["page"+l]},klass:{has:function(m,l){return-1!==m.className.indexOf(l)},add:function(m,l){!d.klass.has(m,l)&&f.addBodyClasses&&(m.className+=" "+l)},remove:function(m,l){f.addBodyClasses&&(m.className=m.className.replace(l,"").replace(/^\s+|\s+$/g,""))}},dispatchEvent:function(l){return"function"==typeof h[l]?h[l].call():void 0},vendor:function(){var l,m=b.createElement("div"),n="webkit Moz O ms".split(" ");for(l in n)if("undefined"!=typeof m.style[n[l]+"Transition"])return n[l]},transitionCallback:function(){return"Moz"===e.vendor||"ms"===e.vendor?"transitionend":e.vendor+"TransitionEnd"},canTransform:function(){return"undefined"!=typeof f.element.style[e.vendor+"Transform"]},deepExtend:function(l,n){var m;for(m in n)n[m]&&n[m].constructor&&n[m].constructor===Object?(l[m]=l[m]||{},d.deepExtend(l[m],n[m])):l[m]=n[m];return l},angleOfDrag:function(l,o){var n,m;return m=Math.atan2(-(e.startDragY-o),e.startDragX-l),0>m&&(m+=2*Math.PI),n=Math.floor(m*(180/Math.PI)-180),0>n&&n>-180&&(n=360-Math.abs(n)),Math.abs(n)},events:{addEvent:function(m,l,n){return m.addEventListener?m.addEventListener(l,n,!1):m.attachEvent?m.attachEvent("on"+l,n):void 0},removeEvent:function(m,l,n){return m.addEventListener?m.removeEventListener(l,n,!1):m.attachEvent?m.detachEvent("on"+l,n):void 0},prevent:function(l){l.preventDefault?l.preventDefault():l.returnValue=!1}},parentUntil:function(n,l){for(var m="string"==typeof l;n.parentNode;){if(m&&n.getAttribute&&n.getAttribute(l))return n;if(!m&&n===l)return n;n=n.parentNode}return null}},i={translate:{get:{matrix:function(n){if(d.canTransform()){var m=c.getComputedStyle(f.element)[e.vendor+"Transform"].match(/\((.*)\)/),l=8;return m?(m=m[1].split(","),16===m.length&&(n+=l),parseInt(m[n],10)):0}return parseInt(f.element.style.left,10)}},easeCallback:function(){f.element.style[e.vendor+"Transition"]="",e.translation=i.translate.get.matrix(4),e.easing=!1,clearInterval(e.animatingInterval),0===e.easingTo&&(d.klass.remove(b.body,"snapjs-right"),d.klass.remove(b.body,"snapjs-left")),d.dispatchEvent("animated"),d.events.removeEvent(f.element,d.transitionCallback(),i.translate.easeCallback)},easeTo:function(l){d.canTransform()?(e.easing=!0,e.easingTo=l,f.element.style[e.vendor+"Transition"]="all "+f.transitionSpeed+"s "+f.easing,e.animatingInterval=setInterval(function(){d.dispatchEvent("animating")},1),d.events.addEvent(f.element,d.transitionCallback(),i.translate.easeCallback),i.translate.x(l)):(e.translation=l,i.translate.x(l)),0===l&&(f.element.style[e.vendor+"Transform"]="")},x:function(m){if(!("left"===f.disable&&m>0||"right"===f.disable&&0>m))if(f.hyperextensible||(m===f.maxPosition||m>f.maxPosition?m=f.maxPosition:(m===f.minPosition||m<f.minPosition)&&(m=f.minPosition)),m=parseInt(m,10),isNaN(m)&&(m=0),d.canTransform()){var l="translate3d("+m+"px, 0,0)";f.element.style[e.vendor+"Transform"]=l}else f.element.style.width=(c.innerWidth||b.documentElement.clientWidth)+"px",f.element.style.left=m+"px",f.element.style.right=""}},drag:{listen:function(){e.translation=0,e.easing=!1,d.events.addEvent(f.element,d.eventType("down"),i.drag.startDrag),d.events.addEvent(f.element,d.eventType("move"),i.drag.dragging),d.events.addEvent(f.element,d.eventType("up"),i.drag.endDrag)},stopListening:function(){d.events.removeEvent(f.element,d.eventType("down"),i.drag.startDrag),d.events.removeEvent(f.element,d.eventType("move"),i.drag.dragging),d.events.removeEvent(f.element,d.eventType("up"),i.drag.endDrag)},startDrag:function(n){var m=n.target?n.target:n.srcElement,l=d.parentUntil(m,"data-snap-ignore");if(l)return void d.dispatchEvent("ignore");if(f.dragger){var o=d.parentUntil(m,f.dragger);if(!o&&e.translation!==f.minPosition&&e.translation!==f.maxPosition)return}d.dispatchEvent("start"),f.element.style[e.vendor+"Transition"]="",e.isDragging=!0,e.hasIntent=null,e.intentChecked=!1,e.startDragX=d.page("X",n),e.startDragY=d.page("Y",n),e.dragWatchers={current:0,last:0,hold:0,state:""},e.simpleStates={opening:null,towards:null,hyperExtending:null,halfway:null,flick:null,translation:{absolute:0,relative:0,sinceDirectionChange:0,percentage:0}}},dragging:function(s){if(e.isDragging&&f.touchToDrag){var w,v=d.page("X",s),u=d.page("Y",s),t=e.translation,o=i.translate.get.matrix(4),n=v-e.startDragX,p=o>0,q=n;if(e.intentChecked&&!e.hasIntent)return;if(f.addBodyClasses&&(o>0?(d.klass.add(b.body,"snapjs-left"),d.klass.remove(b.body,"snapjs-right")):0>o&&(d.klass.add(b.body,"snapjs-right"),d.klass.remove(b.body,"snapjs-left"))),e.hasIntent===!1||null===e.hasIntent){var m=d.angleOfDrag(v,u),l=m>=0&&m<=f.slideIntent||360>=m&&m>360-f.slideIntent,r=m>=180&&m<=180+f.slideIntent||180>=m&&m>=180-f.slideIntent;e.hasIntent=r||l?!0:!1,e.intentChecked=!0}if(f.minDragDistance>=Math.abs(v-e.startDragX)||e.hasIntent===!1)return;d.events.prevent(s),d.dispatchEvent("drag"),e.dragWatchers.current=v,e.dragWatchers.last>v?("left"!==e.dragWatchers.state&&(e.dragWatchers.state="left",e.dragWatchers.hold=v),e.dragWatchers.last=v):e.dragWatchers.last<v&&("right"!==e.dragWatchers.state&&(e.dragWatchers.state="right",e.dragWatchers.hold=v),e.dragWatchers.last=v),p?(f.maxPosition<o&&(w=(o-f.maxPosition)*f.resistance,q=n-w),e.simpleStates={opening:"left",towards:e.dragWatchers.state,hyperExtending:f.maxPosition<o,halfway:o>f.maxPosition/2,flick:Math.abs(e.dragWatchers.current-e.dragWatchers.hold)>f.flickThreshold,translation:{absolute:o,relative:n,sinceDirectionChange:e.dragWatchers.current-e.dragWatchers.hold,percentage:o/f.maxPosition*100}}):(f.minPosition>o&&(w=(o-f.minPosition)*f.resistance,q=n-w),e.simpleStates={opening:"right",towards:e.dragWatchers.state,hyperExtending:f.minPosition>o,halfway:o<f.minPosition/2,flick:Math.abs(e.dragWatchers.current-e.dragWatchers.hold)>f.flickThreshold,translation:{absolute:o,relative:n,sinceDirectionChange:e.dragWatchers.current-e.dragWatchers.hold,percentage:o/f.minPosition*100}}),i.translate.x(q+t)}},endDrag:function(m){if(e.isDragging){d.dispatchEvent("end");var l=i.translate.get.matrix(4);if(0===e.dragWatchers.current&&0!==l&&f.tapToClose)return d.dispatchEvent("close"),d.events.prevent(m),i.translate.easeTo(0),e.isDragging=!1,void(e.startDragX=0);"left"===e.simpleStates.opening?e.simpleStates.halfway||e.simpleStates.hyperExtending||e.simpleStates.flick?e.simpleStates.flick&&"left"===e.simpleStates.towards?i.translate.easeTo(0):(e.simpleStates.flick&&"right"===e.simpleStates.towards||e.simpleStates.halfway||e.simpleStates.hyperExtending)&&i.translate.easeTo(f.maxPosition):i.translate.easeTo(0):"right"===e.simpleStates.opening&&(e.simpleStates.halfway||e.simpleStates.hyperExtending||e.simpleStates.flick?e.simpleStates.flick&&"right"===e.simpleStates.towards?i.translate.easeTo(0):(e.simpleStates.flick&&"left"===e.simpleStates.towards||e.simpleStates.halfway||e.simpleStates.hyperExtending)&&i.translate.easeTo(f.minPosition):i.translate.easeTo(0)),e.isDragging=!1,e.startDragX=d.page("X",m)}}}},j=function(l){l.element&&(d.deepExtend(f,l),e.vendor=d.vendor(),i.drag.listen())};this.open=function(l){d.dispatchEvent("open"),d.klass.remove(b.body,"snapjs-expand-left"),d.klass.remove(b.body,"snapjs-expand-right"),"left"===l?(e.simpleStates.opening="left",e.simpleStates.towards="right",d.klass.add(b.body,"snapjs-left"),d.klass.remove(b.body,"snapjs-right"),i.translate.easeTo(f.maxPosition)):"right"===l&&(e.simpleStates.opening="right",e.simpleStates.towards="left",d.klass.remove(b.body,"snapjs-left"),d.klass.add(b.body,"snapjs-right"),i.translate.easeTo(f.minPosition))},this.close=function(){d.dispatchEvent("close"),i.translate.easeTo(0)},this.expand=function(l){var m=c.innerWidth||b.documentElement.clientWidth;"left"===l?(d.dispatchEvent("expandLeft"),d.klass.add(b.body,"snapjs-expand-left"),d.klass.remove(b.body,"snapjs-expand-right")):(d.dispatchEvent("expandRight"),d.klass.add(b.body,"snapjs-expand-right"),d.klass.remove(b.body,"snapjs-expand-left"),m*=-1),i.translate.easeTo(m)},this.on=function(l,m){return h[l]=m,this},this.off=function(l){h[l]&&(h[l]=!1)},this.enable=function(){d.dispatchEvent("enable"),i.drag.listen()},this.disable=function(){d.dispatchEvent("disable"),i.drag.stopListening()},this.settings=function(l){d.deepExtend(f,l)},this.state=function(){var l,m=i.translate.get.matrix(4);return l=m===f.maxPosition?"left":m===f.minPosition?"right":"closed",{state:l,info:e.simpleStates}},j(k)};"undefined"!=typeof module&&module.exports&&(module.exports=a),"undefined"==typeof ender&&(this.Snap=a),"function"==typeof define&&define.amd&&define("snap",[],function(){return a})}).call(this,window,document);